# Update Log — 2025-11-10

This document summarizes the changes added today to make the project runnable and feature-complete for the areas referenced.

## Summary

- Implemented missing pages referenced by routes and docs
- Added foundational services and utilities used across pages
- Seeded mock data files required by docs
- Created WARP.md to guide future work in this repo
- Documented Node.js version/tooling guidance to avoid build/runtime errors

## New files

Pages
- src/pages/public/SignUpPage/SignUpPage.js
- src/pages/public/SignUpPage/index.js
- src/pages/customer/WriteReviewPage/WriteReviewPage.js
- src/pages/customer/WriteReviewPage/index.js

Services
- src/services/storageService.js — JSON localStorage helper
- src/services/dataService.js — read-only access to bundled JSON for offline/mock flows
- src/services/mockAPI.js — latency/error simulators for demos

Utilities
- src/utils/constants.js — global constants (commission rate, currency, date format)
- src/utils/dateHelpers.js — toISODate, daysBetween, formatDate
- src/utils/validators.js — required, email, minLength, passwordMatch
- src/utils/formatters.js — currency, capitalize
- src/utils/priceCalculator.js — rentalDays, basePrice, extrasCost, totalPrice, commission

Data (mock)
- src/data/reviews.json
- src/data/commissions.json
- src/data/payments.json

Meta
- WARP.md — commands and architecture overview for Warp agents

## Behavior details

SignUpPage
- Simple registration form (first/last name, email, phone, password, role)
- Persists via usersAPI.create (backend server must be running)
- Redirects to /agency/register when role = agency, else to /login

WriteReviewPage
- Minimal review form (rating, optional title, comment)
- Persists to localStorage under key reviews for now (can be moved to API later)

Shared services/utilities
- storageService abstracts localStorage read/write with JSON safety
- dataService provides read-only access to bundled JSON (for offline demos)
- priceCalculator centralizes pricing/commission logic used by booking/earnings flows
- dateHelpers/validators/formatters provide common helpers referenced in pages

## Commands (unchanged, documented in WARP.md)

- Frontend: npm start
- Backend: npm run server
- Dev (both): npm run dev
- Build: npm run build
- Tests: npm test (single file: npm test -- src/App.test.js)

## Tooling guidance (Node.js)

- Recommended Node version: 20.x (react-scripts 5 + Babel chain is not compatible with Node 22)
- If you hit Babel errors like "Use the `external-helpers` plugin…":
  1) Switch Node: nvm install 20.18.0 && nvm use 20.18.0
  2) Clean install deps: remove node_modules (root and server), then npm ci && npm run install-server
  3) Start: npm run dev

## Next steps (optional)

- If you want server-side persistence for reviews/commissions, extend server/server.js with endpoints and wire src/services/api.js accordingly.
- I can also scaffold additional pages from docs/new (e.g., admin verification/analytics, agency earnings/bookings, customer booking details/confirmation) on request.
